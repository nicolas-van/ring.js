
<!DOCTYPE html>

<html class="progdesign">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ring.js Tutorial</title>
    <meta name="description" content="Ring.js Tutorial">
    <meta name="author" content="Nicolas Vanhoren">

    
    <link rel="shortcut icon" href="/static/img/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/common/static/css/base_style.css" />
    
    <link rel="stylesheet" type="text/css" href="/static/css/style.css"></link>
    <script type="text/javascript" src="/static/js/underscore.js"></script>
    <script type="text/javascript" src="/static/js/ring.js"></script>

</head>
<body>

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-33415030-6', 'neoname.eu');
      ga('send', 'pageview');

    </script>
    <a href="https://github.com/nicolas-van/ring.js"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>


    <div class="wrap">

        <div class="container ">

            <div class="row">
                <div class="leftAreaCell col-md-3">
                    
    <div class="sidePageHeader sideBlock">
        <a href="/"><img src="/static/img/ring_150.png"></a>
        <div>
            <h1>Ring.js</h1>
            <h2>JavaScript Class System with Multiple Inheritance</h2>
        </div>
    </div>
    <div class="verticalSocialNetwork">
        
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://ringjs.neoname.eu" data-text="Ring.js - JavaScript Class System with Multiple Inheritance" data-via="nicolasvanhoren" data-lang="fr">Tweeter</a>
    <a href="https://twitter.com/nicolasvanhoren" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @nicolasvanhoren</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <!--<iframe src="http://ghbtns.com/github-btn.html?user=nicolas-van&repo=ring.js&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>-->

    </div>
    <div class="sideNavigation sideBlock">
        <h3>Navigation</h3>
        
    <a href="/">home</a>
    <a href="/docs/docs.html">documentation</a>
    <a href="https://github.com/nicolas-van/ring.js/releases">releases</a>
    <a href="/faq.html">faq</a>

    </div>
    <div class="usefulLinks sideBlock">
        <h3>Useful Links</h3>
        
    <a href="https://github.com/nicolas-van/ring.js/issues">Bug tracker</a>
    <a href="https://github.com/nicolas-van/ring.js">Ring.js @ Github</a>
    
    <a href="https://github.com/nicolas-van">Author's projects</a>
    <a href="http://butterflyprogramming.neoname.eu/">Author's blog</a>
    <a href="https://twitter.com/nicolasvanhoren">Author's twitter</a>


    </div>

                </div>
                <div class="rightAreaCell col-md-9">
                    
                    
                    
<h1 id="tutorial">Tutorial</h1>
<h2 id="installation-in-browser">Installation in Browser</h2>
<p>If you use bower:</p>
<div class="codehilite"><pre><span class="nx">bower</span> <span class="nx">install</span> <span class="nx">ring</span>
</pre></div>


<p>If you don't use bower (you should) then 
<a href="https://github.com/nicolas-van/ring.js/releases">download the last release of Ring.js</a>.</p>
<p>Ring.js has only one dependency: <a href="http://underscorejs.org/">Underscore.js</a>. It is already provided in the Ring.js
release but you can use another version if you want.</p>
<p>To use Ring.js add theses lines to your HTML header:</p>
<div class="codehilite"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;underscore.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;ring.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>


<h2 id="installation-in-nodejs">Installation in node.js</h2>
<p>Use this command to install Ring.js:</p>
<div class="codehilite"><pre>npm install ring
</pre></div>


<p>Then inside your program:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">ring</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;ring&quot;</span><span class="p">);</span>
</pre></div>


<h2 id="declaring-classes">Declaring Classes</h2>
<p>The <code>ring.create()</code> function is used to declare new classes:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">saySomething</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">saySomething</span><span class="p">());</span> <span class="c1">// prints &quot;hello world&quot; in the JavaScript console</span>
</pre></div>


<p><code>ring.create()</code> takes a dictionary as argument. The content of that dictionary will be added to the prototype of the
class.</p>
<h2 id="constructor">Constructor</h2>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">(</span><span class="s2">&quot;Nicolas&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">// prints &quot;Nicolas&quot;</span>
</pre></div>


<p>When the dictionary of properties given to <code>ring.create()</code> contains a method named <code>constructor</code>, that method will be
called during the object construction with the arguments given to the class when using <code>new</code>.</p>
<h2 id="inheritance">Inheritance</h2>
<p>To inherit from one or multiple classes, add a list of the classes to inherit as an argument of <code>ring.create()</code> <em>before</em>
the properties dictionary.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">x</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;x&quot;</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">y</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;y&quot;</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">C</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">],</span> <span class="p">{});</span>

<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">C</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">x</span><span class="p">());</span> <span class="c1">// prints &quot;x&quot;;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">y</span><span class="p">());</span> <span class="c1">// prints &quot;y&quot;;</span>
</pre></div>


<p>Diamond inheritance (ie: the classes B and C both inherit from A and the class D inherits from B <em>and</em> C) is allowed by
Ring.js.</p>
<p>Alternatively you can use the more classical <code>$extend</code> method:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({});</span>

<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">$extend</span><span class="p">({});</span>
</pre></div>


<h2 id="super-method">Super Method</h2>
<p>To call the super method when overriding a method, use <code>this.$super()</code>. Pass arguments to <code>this.$super()</code> to forward
arguments if necessary.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="nx">sayHello</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;Hello &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">A</span><span class="p">],</span> <span class="p">{</span>
    <span class="nx">sayHello</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$super</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, nice to meet you&quot;</span><span class="p">;</span>
    <span class="p">},</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">B</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">sayHello</span><span class="p">(</span><span class="s2">&quot;Nicolas&quot;</span><span class="p">));</span> <span class="c1">// prints &quot;Hello Nicolas, nice to meet you&quot;</span>
</pre></div>


<h2 id="testing-the-class-of-an-object">Testing the Class of an Object</h2>
<p>The standard procedure in JavaScript to test if an object is an instance of a class is to use <code>instanceof</code>. But, due to
the implementation of inheritance in Ring.js (which is necessary to have multiple inheritance), <code>instanceof</code> can not
work properly.</p>
<p>So you should use <code>ring.instance()</code> instead.</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">({});</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">A</span><span class="p">],</span> <span class="p">{});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="k">new</span> <span class="nx">A</span><span class="p">(),</span> <span class="nx">A</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="k">new</span> <span class="nx">B</span><span class="p">(),</span> <span class="nx">A</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
</pre></div>


<p><code>ring.instance(obj, type)</code> will return <code>true</code> if <code>obj</code> is an instance of <code>type</code> or an instance of a sub-class of <code>type</code>.</p>
<p><code>ring.instance()</code> can also be used with classes and objects that do not use the Ring.js class system. It will use the
<code>instanceof</code> operator in that case. It means you can safely replace all the usages of <code>instanceof</code> in any programs by
<code>ring.instance()</code> without causing problems.</p>
<p>Additionally, <code>ring.instance()</code> can be used to test the type of basic data types in JavaScript. To do so, use a string
as second argument instead of a class. Example:</p>
<div class="codehilite"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{},</span> <span class="s2">&quot;function&quot;</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
</pre></div>


<h2 id="creation-of-new-exception-types">Creation of New Exception Types</h2>
<p>To create new exception types you are supposed to inherit from the standard <code>Error</code> class. But inheriting from that
standard class can be hard. That's why Ring.js contains a feature to bring a solution to that:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">MyError</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">ring</span><span class="p">.</span><span class="nb">Error</span><span class="p">],</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;MyError&quot;</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">MyError</span><span class="p">(</span><span class="s2">&quot;an error occured&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nb">Error</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ring</span><span class="p">.</span><span class="nb">Error</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ring</span><span class="p">.</span><span class="nx">instance</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">MyError</span><span class="p">));</span> <span class="c1">// prints &quot;true&quot;</span>
<span class="p">}</span>
</pre></div>


<p>The <code>ring.Error</code> class is a special class using the Ring.js class system <em>but</em> it also inherits from the standard
<code>Error</code> class. You can create new exceptions classes inheriting from it and thus create complex exception hierarchies.</p>
<p>Please note the <code>name</code> property is a property of the standard <code>Error</code> class that can be useful for debugging. So all
exception classes should define one.</p>
<h2 id="compatibility-with-other-class-systems">Compatibility with other class systems</h2>
<p>With Ring.js, since version 2, it is possible to inherit from a class created with any other class system. Example
with a Backbone model:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">A</span><span class="p">],</span> <span class="p">{</span>
    <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$super</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<p>Inheriting from a non-Ring class uses the same syntax than with a Ring class. <code>this.$super</code> is usable as always. When
overriding the constructor method, simply define a <code>constructor</code> function like you would with a normal Ring class.
To call the original implementation of the constructor, use the usual <code>this.$super</code>. It doesn't matter if you are
using a class system that uses another name for the constructor, like <code>initialize</code>, <code>init</code> or whatever. Just use
<code>constructor</code> and <code>this.$super()</code> like usual and Ring.js will do the rest.</p>
<p>Also note that, in the above example, <code>new B() instanceof A</code> will return <code>false</code>. <code>instanceof</code> still doesn't work in
this case so you should use <code>ring.instance()</code> instead.</p>
<p>Inheriting from a non-Ring class has some limitations. We could mostly resume it by saying that Ring does not "see"
the inheritance in other classes. Example:</p>
<div class="codehilite"><pre><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">...</span> <span class="nx">some</span> <span class="nx">non</span><span class="o">-</span><span class="nx">Ring</span> <span class="kr">class</span> <span class="p">...</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="p">...</span> <span class="nx">some</span> <span class="nx">non</span><span class="o">-</span><span class="nx">Ring</span> <span class="kr">class</span> <span class="nx">inheriting</span> <span class="nx">from</span> <span class="nx">A</span> <span class="p">...</span>

<span class="kd">var</span> <span class="nx">C</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">create</span><span class="p">([</span><span class="nx">B</span><span class="p">],</span> <span class="p">{...});</span>
</pre></div>


<p>Instances of C will work as expected in this example. But still, ring doesn't understand the relation between <code>A</code> and
<code>B</code>, and <code>ring.instance(new C(), A)</code> will return <code>false</code> while <code>ring.instance(new C(), B)</code> return <code>true</code>.</p>

                </div>
            </div>

        </div>

    </div>

    <footer class="footerRow">
        Copyright © 2013 <a href="https://github.com/nicolas-van">Nicolas Vanhoren</a><br />
        All Rights Reserved
    </footer>

    
    

    <!--[if lt IE 8]>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
    <script>
        // You may want to place these lines inside an onload handler
        CFInstall.check({
        mode: "overlay"
        });
    </script>
    <![endif]-->
</body>
</html>
